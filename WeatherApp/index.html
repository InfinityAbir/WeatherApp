<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Animated Weather App</title>
    <style>
      :root {
        --bg: #ffffff;
        --text: #000000;
        --card: #f2f2f2;
      }

      body.dark {
        --bg: #1e1e1e;
        --text: #ffffff;
        --card: #2e2e2e;
      }

      body {
        font-family: Arial, sans-serif;
        background: var(--bg);
        color: var(--text);
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 2rem;
        transition: background 0.3s ease, color 0.3s ease;
      }

      .container {
        background: var(--card);
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        text-align: center;
        max-width: 420px;
        width: 100%;
        transition: background 0.3s ease;
        animation: fadeIn 1s ease-in-out;
      }

      input,
      button,
      select {
        padding: 0.6rem;
        font-size: 1rem;
        margin-top: 0.5rem;
        margin-bottom: 1rem;
        border-radius: 0.5rem;
        border: 1px solid #ccc;
        width: 100%;
        transition: all 0.3s ease;
      }

      button {
        background: #007bff;
        color: white;
        border: none;
        cursor: pointer;
        transform: scale(1);
      }

      button:hover {
        background: #0056b3;
        transform: scale(1.05);
      }

      .forecast {
        margin-top: 1rem;
        animation: fadeIn 0.8s ease-in-out;
      }

      .day {
        margin: 1rem 0;
        background: rgba(255, 255, 255, 0.07);
        padding: 1rem;
        border-radius: 0.5rem;
        transform: translateY(20px);
        opacity: 0;
        animation: slideUp 0.5s forwards ease;
      }

      .day:nth-child(2) {
        animation-delay: 0.2s;
      }
      .day:nth-child(3) {
        animation-delay: 0.4s;
      }
      .day:nth-child(4) {
        animation-delay: 0.6s;
      }

      .day img {
        vertical-align: middle;
      }

      .error {
        color: red;
        animation: fadeIn 0.5s ease-in-out;
      }

      .flag {
        height: 20px;
        margin-left: 8px;
        vertical-align: middle;
      }

      .top-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
      }

      label {
        font-size: 0.9rem;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="top-row">
        <label><input type="checkbox" id="themeToggle" /> üåô Dark Mode</label>
        <label>
          üå°Ô∏è Unit:
          <select id="unitToggle">
            <option value="C" selected>¬∞C</option>
            <option value="F">¬∞F</option>
          </select>
        </label>
      </div>

      <h2>üå§Ô∏è Weather Forecast</h2>
      <input type="text" id="cityInput" placeholder="Enter city name" />
      <button onclick="getWeather()">Get Forecast</button>

      <div class="forecast" id="forecast"></div>
    </div>

    <script>
      const forecastDiv = document.getElementById("forecast");
      const themeToggle = document.getElementById("themeToggle");
      const unitToggle = document.getElementById("unitToggle");

      themeToggle.addEventListener("change", () => {
        document.body.classList.toggle("dark");
      });

      function getFlagURL(countryName) {
        const countries = {
          Bangladesh: "bd",
          "United Kingdom": "gb",
          "United States of America": "us",
          India: "in",
          France: "fr",
          Germany: "de",
          Japan: "jp",
          China: "cn",
          Canada: "ca",
          Australia: "au",
        };
        const code = countries[countryName];
        return code ? `https://flagcdn.com/24x18/${code}.png` : "";
      }

      async function getWeather() {
        const city = document.getElementById("cityInput").value.trim();
        const unit = unitToggle.value;

        if (!city) {
          forecastDiv.innerHTML =
            '<div class="error">Please enter a city name.</div>';
          return;
        }

        const apiKey = "3f3ef282c2444b4395580124252108";
        const url = `http://api.weatherapi.com/v1/forecast.json?key=${apiKey}&q=${encodeURIComponent(
          city
        )}&days=3&aqi=no`;

        try {
          forecastDiv.innerHTML = "Loading...";
          const res = await fetch(url);
          if (!res.ok) throw new Error("City not found");

          const data = await res.json();
          const location = data.location.name;
          const country = data.location.country;
          const forecastDays = data.forecast.forecastday;

          const flagUrl = getFlagURL(country);
          let html = `<h3>Weather in ${location}, ${country}`;
          if (flagUrl)
            html += ` <img class="flag" src="${flagUrl}" alt="${country}" />`;
          html += `</h3>`;

          forecastDays.forEach((day, index) => {
            const tempMax =
              unit === "C" ? day.day.maxtemp_c : day.day.maxtemp_f;
            const tempMin =
              unit === "C" ? day.day.mintemp_c : day.day.mintemp_f;
            const unitSymbol = unit === "C" ? "¬∞C" : "¬∞F";

            html += `
            <div class="day" style="animation-delay: ${index * 0.2}s">
              <strong>${day.date}</strong><br>
              <img src="${day.day.condition.icon}" alt="${
              day.day.condition.text
            }" />
              <div>${day.day.condition.text}</div>
              <div>üå°Ô∏è Max: ${tempMax}${unitSymbol} | Min: ${tempMin}${unitSymbol}</div>
            </div>
          `;
          });

          forecastDiv.innerHTML = html;
        } catch (err) {
          forecastDiv.innerHTML = `<div class="error">Error: ${err.message}</div>`;
        }
      }
    </script>
  </body>
</html>

